<!-- this demo requires a browser that natively supports ES2015 -->

<script src="https://unpkg.com/rxjs/bundles/rxjs.umd.js"></script>
<script src="https://unpkg.com/vue@next"></script>
<script src="../dist/vue-next-rx.js"></script>
<div id="app">
  <div class="home">
    <img alt="Vue logo" src="../assets/logo.png" />

    <div class="result">
      <div class="box">
        <div class="original">
          <div>{{ msg }}</div>
          <div>{{ dmsg }}</div>
        </div>
        {{ time }}
        <div class="mapped">
          <div>{{ msg }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
<script lang="ts">
  const { map } = rxjs.operators;
  const { ref, watch, watchEffect } = VueNextRx;
  console.log(this);

  const app = Vue.createApp({
    components: {},
    setup() {
      const msg = ref("Message exemple");

      const dmsg = ref("Message exemple");

      var time = ref(0);
      var i = 0;
      setInterval(() => {
        i++;
        time.value++;
        msg.value = i.toString();
        dmsg.value = i.toString();
      }, 2000);

      msg.subscribe((value) => {
        console.log(value); // After 2s will print : New message !
      });
      return { msg, dmsg, time };
    },
  });
  app.mount("#app");
</script>
<style lang="scss">
  .box {
    align-items: center;
    display: flex;
    flex-direction: column;
  }

  .original,
  .mapped {
    border-radius: 15px;
    border: 1px solid grey;
    width: 500px;
    height: 200px;
    margin: 1em;
    display: flex;
    align-items: center;
  }
</style>
